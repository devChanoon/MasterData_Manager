# MasterData_Manager

**프로젝트 초기 DB 데이터 초기화 및 파라미터 설정 프로그램**

MasterData_Manager는 프로젝트를 처음 시작할 때 필요한 데이터베이스 초기화 작업과 시스템 운영에 필요한 다양한 파라미터를 설정하는 기능을 제공합니다.

## 주요 구성 요소

본 프로그램은 사용자 편의성과 효율적인 데이터 관리를 위해 다음과 같은 주요 구성 요소를 활용합니다.

* **DevExpress 22.2.3**: 직관적인 사용자 인터페이스와 다양한 데이터 처리 기능을 제공하는 강력한 UI 컴포넌트 라이브러리입니다.
* **INI 파일**: 프로그램의 설정, 데이터베이스 연결 정보, 초기 파라미터 값, 데이터 삭제 예외 규칙 등을 관리하는 데 사용됩니다.

## 파일 구조 및 설정

프로그램의 주요 설정 파일들은 다음 경로에 위치하며, 각 파일은 특정 기능을 수행하는 데 필요한 정보를 담고 있습니다.

### 1. DB 연결 설정 파일

* **경로**: `MasterData_Manager/bin/Debug/Init`
* **파일**: `DB_Config.ini`
* **설명**: 데이터베이스 연결에 필요한 정보를 저장합니다. 마지막으로 성공했던 DB 연결 정보가 기록되며, 중요한 정보인 ID 및 비밀번호는 암호화되어 안전하게 관리됩니다.

### 2. 기본 파라미터 설정 파일

* **경로**: `MasterData_Manager/bin/Debug/Init`
* **파일**: `Step2_Parameters.ini`
* **설명**: 파라미터 설정 기능 화면에서 기본적으로 사용자에게 보여줄 파라미터 목록을 정의합니다. 각 파라미터는 다음 세 가지 속성으로 설정됩니다.
    * `parameter_code`: 파라미터의 고유 코드
    * `default_value`: 해당 파라미터의 기본 값
    * `remark`: 파라미터에 대한 설명 또는 주석
* **동작 방식**: 프로그램 실행 시 DB 내에 해당 `parameter_code`를 가진 파라미터가 존재하지 않으면, 이 파일에 설정된 `default_value`로 새로운 파라미터를 DB에 삽입합니다.

### 3. 데이터 삭제 예외 규칙 설정 파일

* **경로**: `MasterData_Manager/bin/Debug/Init`
* **파일**: `Step3_Exception_TableList.ini`
* **설명**: 기존 데이터를 삭제하는 기능에서 삭제를 제외할 테이블과 해당 테이블의 예외 조건을 설정합니다. 각 규칙은 다음 세 가지 속성으로 정의됩니다.
    * `table_name`: 예외 규칙을 적용할 테이블 이름
    * `condition_name`: 예외 조건으로 사용할 컬럼 이름 (선택 사항)
    * `value`: 예외 조건의 값 (선택 사항)
* **동작 방식**:
    * `condition_name`과 `value`가 모두 설정되지 않은 테이블은 데이터 삭제 대상에서 제외되어 모든 데이터가 유지됩니다.
    * `condition_name`과 `value`가 설정된 경우, 해당 조건과 일치하는 데이터를 제외한 나머지 데이터만 삭제됩니다. **(V1.2.2 업데이트)** 이제 동일한 테이블에 여러 개의 조건이 설정된 경우, 해당 조건에 명시된 데이터 외의 모든 데이터가 삭제됩니다. `Step3_Exception_TableList.ini` 파일 내에 동일한 `table_name`으로 여러 줄을 추가하여 다중 조건을 설정할 수 있습니다.

    **예시:**
    ```ini
    employee / emp_cd / 'a2003850','a2003851'
    employee / sys_plant_cd / 'PC001'
    ```
    위 설정은 `employee` 테이블에서 `emp_cd`가 'a2003850' 또는 'a2003851'이거나 `sys_plant_cd`가 'PC001'인 데이터를 제외한 모든 데이터를 삭제합니다.

---

## 버전 히스토리

### v1.2.2
* **데이터 삭제 기능 개선**: `ExceptionTableList`에서 동일 테이블에 대한 다수의 조건을 한 번에 처리할 수 있도록 수정되었습니다. 이제 `Step3_Exception_TableList.ini` 파일 내에 동일한 테이블 이름으로 여러 줄에 걸쳐 조건을 입력하면, 해당 조건에 명시된 데이터를 제외한 모든 데이터가 삭제됩니다.

### v1.2.1
* 테이블 ID 값 재설정 부분에서 발생하던 오류가 수정되었습니다.

### v1.2.0
* **DevExpress 버전 업그레이드**: DevExpress 컴포넌트 버전이 V20.1.3에서 **V22.2.3**으로 업그레이드되었습니다.
* 기능 버튼이 변경되었습니다.
    * **마스터 데이터 입력** 버튼이 삭제되었습니다.
    * **복합 파라미터 설정** 버튼이 추가되었습니다.
* 파라미터 설정 방식이 변경되었습니다. 기존에 하드 코딩되어 있던 파라미터 목록을 **Step2_Parameters.ini** 파일에서 읽어오도록 수정되었습니다.
* 테이블 데이터 삭제 쿼리의 오류가 수정되었습니다.

### v1.1.0
* **BackgroundWorker_Manager 적용**: 기존 메인 스레드에서 실행되던 SQL 작업이 `BackgroundWorker`에서 실행되도록 변경되었습니다.
* SQL 작업 실행 시 로딩 팝업이 표시되어 사용자에게 작업 진행 상황을 시각적으로 제공합니다.

### v1.0.0
* **DB Information**: DB 주소, DB 이름, ID, 비밀번호를 입력하여 해당 데이터베이스에 접속하는 기능을 제공합니다.
* **Action**:
    * **기존 DB Name 조회**: 접속한 데이터베이스 내에서 설정된 DB 이름이 포함된 저장 프로시저가 있는지 조회합니다.
    * **파라미터 설정**: GMS 프로그램 사용을 위한 기본적인 파라미터를 설정합니다.
    * **기존 데이터 삭제**: 접속한 데이터베이스 내 테이블의 데이터를 설정된 예외 조건에 따라 삭제합니다.
    * **마스터 데이터 입력**: 기능은 아직 구현되지 않았습니다.
